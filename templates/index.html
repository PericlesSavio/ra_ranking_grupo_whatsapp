<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>RA: Adicionar/Atualizar Usuário</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-5">
        {% include 'menu.html' %}
        <h1 class="mb-4 text-center">RA: Ranking de Membros do Grupo</h1>
        <div class="container py-3">
            <p class="text-center text-muted">Última atualização: {{ ultima_atualizacao }}</p>
            {% if tabela %}
                <div class="table-responsive">
                    {{ tabela|safe }}
                </div>
            {% endif %}
        </div>

    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
          const table = document.querySelector('.table-responsive table');
          if (table) {
              table.classList.add('table', 'table-striped', 'table-hover', 'table-bordered', 'align-middle');

              $(table).DataTable({
                  paging: false,
                  info: false,
                  searching: true,
                  order: [[3, "desc"]],
                  columnDefs: [
                      { orderable: false, targets: 0 }
                  ],
                  language: {
                        search: "Buscar:"
                  },
                  drawCallback: function(settings) {
                      var api = this.api();
                      api.column(0, { search: 'applied', order: 'applied' }).nodes().each(function(cell, i) {
                          cell.innerHTML = i + 1;
                      });
                  }
              });
          }
      });
      </script>
    </div>
</body>
</html>